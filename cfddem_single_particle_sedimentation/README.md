# CFD-DEM: single particle sedimentation
<img src="figures/flow_field.png" height="200">

## Contents

### `template/` and `generate.py`
The `generate.py` script generates instances of the single particle sedimentation case from the blueprint found within `template/`.
To generate one or more runs, modify the parameters and logic found at the end of `generate.py` and run the script.
The runs are generated in the `runs/` directory.

### `run.py`
Executes the runs within the `runs/` directory.
By default, all runs are executet.
To execute select runs, pass their paths as arguments like this:
```sh
python run.py runs/run-1 runs/run-2
```

### `postprocess.py`
Postproccesses the data generated by the solvers for plotting.
- Extracts the particle velocity
- Merges and exports the preCICE profiling events (disabled by default)

The postprocessed data is written to the `data/` directory.

By default all runs within `runs/` are postprocessed.
To postprocess select runs pass their paths as arguments like this:
```sh
python postprocess.py runs/run-1 runs/run-2
```

### `plot_*.py`
Generate varios plots from the postprocessed data in the `data/` directory.

### `reference_data`
Data from [Song and Park](https://www.mdpi.com/2077-1312/8/12/983) we use to validate against.

### `figures/`
Figures and animations from the thesis and accompanying presentations.

## Reproducing results

### Requirements
For running the case:
- Our modified version of LIGGGHTS
- [OpenFOAM](https://www.openfoam.com/) (tested with version 2412)
- Our AndersonJacksonFoam solver
- Our modified version of the OpenFOAM-preCICE adapter

For post-processing the results:
- [Python](https://www.python.org/downloads/) (tested with version 3.13.5)
- [Python packages](https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/#using-a-requirements-file) listed in `requirements.txt`

### Running
Generate one or more runs with:
```sh
python generate.py
```
Then run them with:
```sh
python run.py
```
Now, you can postprocess and plot the results using:
```
python postprocess.py
python plot_particle_velocity.py
```


