# Particle tracing: vortex flow
This is the vortex flow scenario from Section 4.1 of the bachelor's thesis thesis *Flexible mesh-particle coupling with preCICE* by Robin Walloner.

## Contents

### `ParticleTracing.cc`
The source code of the particle tracing participant.

### `experiments/`
Contains subdirectories for each experiment.

Each experiment comes with:
- A `generate.py` script that sets up the directory structure and generates the necessary configuration files for the experiment.
- A `clean.sh` script that removes all files generated by the experiment.
- A `run.py` script that runs the experiment.
- One or more `.ipynb`-notebooks that are used to post-process the results generated by the experiment (e.g., create plots).

Each experiment consists of one or more runs (instances of the particle tracing with different parameters).
The runs are organized in subdirectories.
Each directory level coresponds to one parameter.
E.g. the `euler_explicit/nearest-neighbor/timestep-0.01/refinement-4/` directory contains the run with the paramenters: `euler_explicit` integration scheme, `nearest-neighbor` mapping, `0.01` timestep size and `4` grid refinement steps.

## Reproducing results

### Requirements
- C++ toolchain (tested with [GCC](https://gcc.gnu.org/install/) version 15.1.1)
- [CMake](https://cmake.org/download/) (tested with version 3.31.6)
- [preCICE](https://precice.org/installation-overview.html) (tested with version 3.2.0)
- [deal.II](https://dealii.org/current/readme.html) compiled with support for MPI and P4EST (tested with version 9.6.2)
- [Python](https://www.python.org/downloads/) (tested with version 3.13.5)
- [Python packages](https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/#using-a-requirements-file) listed in `requirements.txt`
- [Jupyter Notebook](https://jupyter.org/install#jupyter-notebook)

### Building the participants
Both participant are compiled into a single executable that can be run either in `Fluid` or in `Particle` mode.
To build this executable:
```sh
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Release ..
cmake --build .
```

### Running experiments
Navigate to the experiment directory and run the provided scripts:
```sh
cd experiments/convergence_under_grid_refinement
./clean.sh
python generate.py
python run.py
```
After the runs are finished, use the provided [Jupyter notebooks](https://docs.jupyter.org/en/latest/) to post-process the results.
